# gotest_23.07.25
## Описание программы
В корневой папке проекта присутствует Makefile, упрощающий запуск и чистый ребилд контейнера.

**Цели makefile:**
- **all** - очистка и генерация swagger; билд и запуск контейнера
- **clean-build** - очистка и генерация swagger; остановка и отчиска кеша, всех контейнеров; билд и запуск контейнера

**Дополнительные цели:**
- **clear-build** - очистка кэша и всех контейнеров
- **swagger** - очистка и генерация swagger компонентов
- **clean-swagger** - очистка swagger компонентов.

По умолчанию, подключение к swagger UI можно осуществить по следующему адресу:
``
http://localhost:8080/swagger/index.html#/
``

В зависимости от настроек docker'а, адрес может быть другим.

**Структура проекта:**
- **main/main.go** - точка входа в программу
- **config/config.yaml** - конфиг-файл
- **docs/** - swagger-файлы
- **migrations/** - миграции для инициализации СУБД
- **internal/** - пакеты, обеспечивающие работу сервера
    - **internal/config** - пакет, загружающий и обрабатывающий конфиг-файл, сохраняющий его содержимое в памяти
    - **internal/lib** - сторонний пакет prettyslog, редактирующий вывод логгера
    - **internal/postgre** - пакет, содержащий функции для отправки транзакций в БД и создания/закрытия пула соединений с БД
    - **interhal/http-server** - пакеты, непосредственно участвующие в обработке http-запросовв
        - **http-server/handlers** - хендлеры для обработки конкретных запросов, подключаемые к роутеру
        - **http-server/middlewares/logger** - тут хранится единственный самописный middleware, добавляющий логирование информации о запросе во время его выполнения. 
        - **response/** - вспомогательный пакет, содержащий структуру для формирования JSON-ответа клиенту и ряд функций.



## Используемые сторонние пакеты
- prettySlog - пакет, делающий вывод логгера более читаемым. Источник: [ссылка на репозиторий](https://github.com/GolangLessons/url-shortener/blob/main/internal/lib/logger/handlers/slogpretty/slogpretty.go)
- middlewares/logger - middleware-handler, логирующий детали поступающих запросов [ссылка на репозиторий](https://github.com/GolangLessons/url-shortener/blob/main/internal/http-server/middleware/logger/logger.go)